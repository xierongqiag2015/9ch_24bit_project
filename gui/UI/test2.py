import numpy as np
import matplotlib.pyplot as plt
import matplotlib.animation as animation
#from __future__ import print_function
import matplotlib
import numpy as np

matplotlib.use("TkAgg")

from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg
from matplotlib.figure import Figure
# import matplotlib.animation as animation
import re
import Tkinter as tk
import ttk
import time

from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker
from up_link import UpLink
from down_link import DownLink
from models import Base


sub_info = re.compile(",*")
#mysql://username:password@hostname/database
DB_CONNECT_STRING = 'mysql://root:ossdbg1@47.96.141.182/collected_datas'
engine = create_engine(DB_CONNECT_STRING, echo=True)
DB_Session = sessionmaker(bind=engine)
session = DB_Session()
Base.metadata.create_all(engine)
total_datas = []
record = session.query(UpLink).filter(UpLink.flag == 1).all()
# for r in record:
#     if r.data:
#         total_datas.append(r.data)
# print "---total_datas", total_datas
# start = [1, 0.18, 0.63, 0.29, 0.03, 0.24, 0.86, 0.07, 0.58, 0]

# metric =[[0.03, 0.86, 0.65, 0.34, 0.34, 0.02, 0.22, 0.74, 0.66, 0.65],
#          [0.43, 0.18, 0.63, 0.29, 0.03, 0.24, 0.86, 0.07, 0.58, 0.55],
#          [0.66, 0.75, 0.01, 0.94, 0.72, 0.77, 0.20, 0.66, 0.81, 0.52]
#         ]


# metric =[[0.03, 0.86, 0.65, 0.34, 0.34, 7, 5, 0.74, 0.66, 0.65,
#          0.43, 0.18, 0.63, 0.29, 0.03, 0.24, 0.86, 0.07, 0.58, 0.55,
#          0.66, 0.75, 0.01, 0.94, 0.72, 0.77, 0.20, 0.66, 0.81, 0.52]
#         ]
# metric = [[3, 2, 1, 3, 1.201854, 1.208731, 1.206842, 1.201685, 1.208946, 1.207002, 1.20178, 1.208907, 1.207103, 1.0, 1.20207, 1.209026, 1.20702, 1.201833, 1.20913, 1.207269, 1.202151, 1.209229, 1.207289, 1.20209, 1.209241, 1.207408, 1.202153, 1.209359, 1.207472, 1.202339, 1.209278, 1.207471, 1.20253, 1.209431, 1.207455, 1.202279, 1.209391, 1.207579, 1.202464, 1.209486, 1.207571, 1.202304, 1.209431, 1.207603, 1.202494, 1.20977, 1.207703, 1.202573, 1.209612, 1.207728, 1.202612, 1.209717, 1.207718, 1.202657, 1.209924, 1.207846, 1.202829, 1.209589, 1.207709, 1.202555, 1.209576, 1.207592, 1.202447, 1.209495, 1.0, 1.207644, 1.202524, 1.209313, 1.207445, 1.20238, 1.209493, 1.207507, 1.202212, 1.209231, 1.207317, 1.202222, 1.209266, 1.207206, 1.201991, 1.208915, 1.207376, 1.202264, 1.208938, 1.207172, 1.202027, 1.209192, 1.207143, 1.202043, 1.209108, 1.207278, 1.202222, 1.209016, 1.207152, 1.202013, 1.208965, 1.207296, 1.202111, 1.209162, 1.207247, 1.202078, 1.209176, 1.207087, 1.201673, 1.208966, 3, 2, 3, 1.207079, 1.20227, 1.209112, 1.207217, 1.202058, 1.209184, 1.207272, 1.202211, 1.0, 1.209289, 1.207296, 1.202215, 1.209244, 1.207255, 1.202224, 1.209367, 1.207492, 1.20239, 1.209314, 1.207463, 1.202522, 1.209417, 1.207469, 1.202306, 1.209533, 1.20756, 1.202496, 1.209534, 1.207563, 1.202537, 1.209528, 1.207539, 1.202296, 1.209661, 1.207667, 1.202401, 1.209534, 1.207558, 1.202446, 1.209587, 1.207708, 1.202627, 1.209589, 1.207697, 1.202403, 1.20971, 1.207713, 1.202407, 1.20943, 1.207821, 1.20278, 1.209711, 1.207643, 1.202419, 1.209669, 1.207601, 1.202418, 1.20957, 1.207622, 1.0, 1.202415, 1.20932, 1.20737, 1.202107, 1.209458, 1.20738, 1.202154, 1.209404, 1.207429, 1.202384, 1.209365, 1.207268, 1.201965, 1.209133, 1.207284, 1.202216, 1.209193, 1.207273, 1.202205, 1.209186, 1.207296, 1.201993, 1.209048, 1.207196, 1.202057, 1.209227, 1.207091, 1.201921, 1.20886, 1.207013, 1.20191, 1.208941, 1.206976, 1.201806, 1.208901, 1.206974, 1.201898, 1.208706, 1.206817, 1.201743, 1.20886, 1.206884, 1.20168, 1.208845, 1.207021, 1.201817, 1.209003, 1.206973, 1.201897, 1.209117, 1.0, 1.20711, 1.201789, 1.208999, 1.207025, 1.201954, 1.20909, 1.207079, 1.202082, 1.209242, 1.207273, 1.202144, 1.209183, 1.207182, 1.202068, 1.209241, 1.207337, 1.202113, 1.209117, 1.207284, 1.202184, 1.209311, 1.207442, 1.202196, 1.209481, 1.207603, 1.202447, 1.209505, 1.20758, 1.202484, 1.209575, 1.207649, 1.202313, 1.209661, 1.207741, 1.202613, 1.209603, 1.207752, 1.202546, 1.209701, 1.207775, 1.202605, 1.209725, 1.207767, 1.20266, 1.209676, 1.2077, 1.202577, 1.209534, 1.207626, 1.202468, 1.0, 1.209494, 1.207485, 1.202335, 1.209323, 1.207414, 1.202311, 1.20931, 1.207377, 1.202334, 1.209301, 1.207242, 1.202111, 1.209193, 1.207245, 1.202118, 1.209162, 1.207193, 1.202147, 1.209266, 1.207196, 1.201946, 1.20918, 1.20719, 1.202091, 1.209363, 1.207201, 1.202005, 1.209223, 1.20725, 1.202168, 1.209185, 1.207206, 1.201991, 1.20914, 1.207184, 1.201976, 1.208901, 1.207108, 1.201947, 1.209173, 1.207108, 1.201934, 1.209018, 1.207186, 1.201963, 1.2091, 1.2072, 1.201969, 1.209288, 1.207255, 1.0, 1.202219, 1.209247, 1.207349, 1.202172, 1.20931, 1.207415, 1.202112, 1.209288, 1.207339, 1.202178, 1.20939, 1.20741, 1.202381, 1.209497, 1.207565, 1.202677, 1.20946, 1.20757, 1.202434, 1.209763, 1.207651, 1.202467, 1.209539, 1.207622, 1.202453, 1.20966, 1.207679, 1.202533, 1.209583, 1.207697, 1.202396, 1.209663, 1.207671, 1.202585, 1.209689, 1.207741, 1.202593, 1.209702, 1.207761, 1.202639, 1.209798, 1.207756, 1.202598, 1.20954, 1.207728, 1.202687, 1.209571, 1.20747, 1.202374, 1.209493, 1.0, 1.207526, 1.20234, 1.209364, 1.207387, 1.202259, 1.209516, 1.207439, 1.20216, 1.20926, 1.207348, 1.202288, 1.209257, 1.207229, 1.202015, 1.209345, 1.207287, 1.202206, 1.209148, 1.207215, 1.202185, 1.209234, 1.20721, 1.20212, 1.209172, 1.20724, 1.202012, 1.209085, 1.207169, 1.201933, 1.209194, 1.20717, 1.201864, 1.209025, 1.207195, 1.20195, 1.208829, 1.206909, 1.201831, 1.208749, 1.207027, 1.201816, 1.208805, 1.20693, 1.201745, 1.20905, 1.20695, 1.201729, 1.209042, 1.207123, 1.201915, 1.0, 1.209128, 1.207027, 1.201904, 1.209042, 1.207181, 1.202072, 1.209135, 1.207196, 1.202034, 1.209158, 1.207171, 1.201993, 1.209231, 1.207294, 1.202213, 1.209326, 1.20738, 1.202338, 1.209323, 1.207408, 1.202379, 1.209397, 1.207371, 1.20231, 1.209469, 1.207478, 1.202289, 1.209375, 1.207452, 1.202333, 1.209699, 1.207591, 1.202341, 1.209701, 1.207778, 1.202549, 1.209661, 1.20773, 1.202649, 1.209783, 1.207745, 1.202559, 1.209448, 1.207662, 1.202559, 1.209515, 1.207578, 1.202425, 1.209474, 1.207551, 1.0, 1.202418, 1.209304, 1.207339, 1.202367, 1.209378, 1.207395, 1.20238, 1.209331, 1.207424, 1.202338, 1.209332, 1.20729, 1.202132, 1.209305, 1.207427, 1.202242, 1.209308, 1.207334, 1.20217, 1.209266, 1.207188, 1.202018, 1.208934, 1.207324, 1.202235, 1.20922, 1.207261, 1.202036, 1.20904, 1.207204, 1.202061, 1.209153, 1.207176, 1.202012, 1.208979, 1.206979, 1.20187, 1.208946, 1.207045, 1.201975, 1.20909, 1.207125, 1.201962, 1.209074, 1.207128, 1.202069, 1.209015, 1.207179, 1.202073, 1.209352, 1.0, 1.20724, 1.202168, 1.209264, 1.207365, 1.202334, 1.209171, 1.207522, 1.202523, 1.209602, 1.207504, 1.202316, 1.209483, 1.207492, 1.202275, 1.209538, 1.207629, 1.20249, 1.209705, 1.207633, 1.202464, 1.209579, 1.207588, 1.202533, 1.209596, 1.207644, 1.202441, 1.209534, 1.20753, 1.2025, 1.209633, 1.207566, 1.202533, 1.209584, 1.207718, 1.202584, 1.209571, 1.20767, 1.202551, 1.209712, 1.207709, 1.202536, 1.209453, 1.207697, 1.202679, 1.209542, 1.20755, 1.202525, 1.209623, 1.207642, 1.202655, 1.0, 1.209552, 1.207542, 1.202357, 1.209267, 1.20751, 1.202263, 1.209347, 1.207396, 1.202304, 1.209286, 1.20734, 1.20214, 1.209185, 1.207285, 1.20221, 1.20926, 1.207311, 1.202224, 1.209212, 1.207216, 1.20198, 1.209175, 1.207196, 1.202118, 1.209208, 1.207157, 1.20198, 1.209005, 1.207158, 1.202084, 1.208989, 1.20713, 1.201819, 1.209158, 1.207124, 1.202, 1.208851, 1.206977, 1.201823, 1.209161, 1.207094, 1.201845, 1.209092, 1.207212, 1.202114, 1.209028, 1.207021, 1.201868, 1.209205, 1.207193, 1.0, 1.20203, 1.208881, 1.20721, 1.202174, 1.209095, 1.207144, 1.201895, 1.209196, 1.207383, 1.202355, 1.209224, 1.207314, 1.202145, 1.209454, 1.207314, 1.202073, 1.209221, 1.207408, 1.20232, 1.209306, 1.207278, 1.20219, 1.209364, 1.207461, 1.202508, 1.209319, 1.207406, 1.202409, 1.209424, 1.207353, 1.202142, 1.209313, 1.207506, 1.202537, 1.209473, 1.20751, 1.202362, 1.209427, 1.207578, 1.20245, 1.209567, 1.207668, 1.20252, 1.209362, 1.207622, 1.202458, 1.209438, 1.207473, 1.202414, 1.209601, 1.0, 1.207579, 1.202376, 1.209342, 1.207427, 1.202296, 1.209332, 1.207352, 1.202364, 1.209471, 1.207399, 1.202208, 1.209234, 1.20729, 1.202141, 1.209223, 1.207317, 1.202096, 1.209243, 1.207311, 1.202093, 1.209102, 1.207167, 1.202203, 1.209259, 1.207231, 1.202208, 1.209018, 1.207232, 1.202185, 1.208937, 1.207011, 1.201918, 1.208959, 1.207156, 1.202012, 1.208923, 1.206985, 1.201807, 1.209003, 1.207058, 1.201874, 1.20908, 1.207229, 1.202212, 1.209173, 1.207209, 1.202087, 1.209285, 1.207305, 1.202185, 1.0, 1.209416, 1.207406, 1.202291, 1.209323, 1.207416, 1.202283, 1.209555, 1.207473, 1.202237, 1.209469, 1.207529, 1.202279, 1.209467, 1.207576, 1.202365, 1.209527, 1.207625, 1.202595, 1.209624, 1.207585, 1.202352, 1.209399, 1.207516, 1.202413, 1.209499, 1.207659, 1.202394, 1.209291, 1.207631, 1.202495, 1.209598, 1.207532, 1.20233, 1.209866, 1.207739, 1.20243, 1.209561, 1.207731, 1.20257, 1.209647, 1.207693, 1.202554, 1.209682, 1.207798, 1.202555, 1.209521, 1.207564, 1.202456, 1.209601, 1.207591, 1.0, 1.202462, 1.209428, 1.207514, 1.202413, 1.209452, 1.20737, 1.202129, 1.20929, 1.207455, 1.202285, 1.209211, 1.207261, 1.202211, 1.209134, 1.207225, 1.202204, 1.209257, 1.207241, 1.202218, 1.209215, 1.207206, 1.201977, 1.20912, 1.207098, 1.20202, 1.209229, 1.207252, 1.202022, 1.209086, 1.207156, 1.201852, 1.209077, 1.207142, 1.202042, 1.209205, 1.207098, 1.201788, 1.208932, 1.207123, 1.201994, 1.208975, 1.207171, 1.202032, 1.209344, 1.207291, 1.202034, 1.209014, 1.207274, 1.20221, 1.209332, 1.0, 1.207329, 1.201956, 1.209269, 1.207353, 1.202292, 1.209186, 1.20724, 1.202157, 1.209396, 1.207368, 1.202168, 1.209185, 1.20737, 1.202189, 1.209211, 1.207214, 1.202078, 1.209494, 1.207483, 1.202315, 1.209283, 1.207379, 1.202371, 1.209413, 1.207398, 1.202101, 1.209415, 1.207442, 1.202279, 1.209298, 1.207388, 1.202255, 1.209564, 1.207574, 1.202312, 1.209423, 1.207592, 1.202514, 1.209425, 1.207431, 1.20216, 1.209433, 1.20751, 1.202334, 1.209354, 1.207362, 1.20217, 1.20924, 1.207339, 1.202158, 1.0, 1.209319, 1.207353, 1.20209, 1.209411, 1.207441, 1.20226, 1.209313, 1.207265, 1.202134, 1.209274, 1.207358, 1.20218, 1.209142, 1.20724, 1.202028, 1.209223, 1.207274, 1.202341, 1.209159, 1.20726, 1.202073, 1.209123, 1.207156, 1.202162, 1.209006, 1.207201, 1.202178, 1.209319, 1.207185, 1.201826, 1.209038, 1.207105, 1.201972, 1.208875, 1.206952, 1.20181, 1.208954, 1.207001, 1.201805, 1.208796, 1.207013, 1.201855, 1.209328, 1.207243, 1.202065, 1.209127, 1.2072, 1.201987, 1.209142, 1.207223, 1.0, 1.202181, 1.20934, 1.207415, 1.20222, 1.20943, 1.207445, 1.202365, 1.209507, 1.207565, 1.202413, 1.209657, 1.20756, 1.2025, 1.209602, 1.207548, 1.202303, 1.209484, 1.207655, 1.202486, 1.209518, 1.207559, 1.202362, 1.209543, 1.207573, 1.202434, 1.209538, 1.207632, 1.202623, 1.20962, 1.207622, 1.202407, 1.209618, 1.207663, 1.202656, 1.209635, 1.207738, 1.202636, 1.209718, 1.207729, 1.202552, 1.209549, 1.207707, 1.202616, 1.209585, 1.207642, 1.202484, 1.20952, 1.207591, 1.202501, 1.20953, 1.0, 1.20752, 1.202406, 1.209393, 1.207505, 1.202306, 1.209307, 1.207494, 1.2023, 1.209289, 1.207348, 1.202289, 1.209061, 1.207332, 1.202185, 1.209049, 1.207219, 1.202012]]

# metric = [[1.206754, 1.201605, 1.208841, 1.206943, 1.201854, 1.208731, 1.206842, 1.201685, 1.208946, 1.207002, 1.20178, 1.208907, 1.207103, 1.0, 1.20207, 1.209026, 1.20702, 1.201833, 1.20913, 1.207269, 1.202151, 1.209229, 1.207289, 1.20209, 1.209241, 1.207408, 1.202153, 1.209359, 1.207472, 1.202339, 1.209278, 1.207471, 1.20253, 1.209431, 1.207455, 1.202279, 1.209391, 1.207579, 1.202464, 1.209486, 1.207571, 1.202304, 1.209431, 1.207603, 1.202494, 1.20977, 1.207703, 1.202573, 1.209612, 1.207728, 1.202612, 1.209717, 1.207718, 1.202657, 1.209924, 1.207846, 1.202829, 1.209589, 1.207709, 1.202555, 1.209576, 1.207592, 1.202447, 1.209495, 1.0, 1.207644, 1.202524, 1.209313, 1.207445, 1.20238, 1.209493, 1.207507, 1.202212, 1.209231, 1.207317, 1.202222, 1.209266, 1.207206, 1.201991, 1.208915, 1.207376, 1.202264, 1.208938, 1.207172, 1.202027, 1.209192, 1.207143, 1.202043, 1.209108, 1.207278, 1.202222, 1.209016, 1.207152, 1.202013, 1.208965, 1.207296, 1.202111, 1.209162, 1.207247, 1.202078, 1.209176, 1.207087, 1.201673, 1.208966, 1.207107, 1.201992, 1.209027, 1.207079, 1.20227, 1.209112, 1.207217, 1.202058, 1.209184, 1.207272, 1.202211, 1.0, 1.209289, 1.207296, 1.202215, 1.209244, 1.207255, 1.202224, 1.209367, 1.207492, 1.20239, 1.209314, 1.207463, 1.202522, 1.209417, 1.207469, 1.202306, 1.209533, 1.20756, 1.202496, 1.209534, 1.207563, 1.202537, 1.209528, 1.207539, 1.202296, 1.209661, 1.207667, 1.202401, 1.209534, 1.207558, 1.202446, 1.209587, 1.207708, 1.202627, 1.209589, 1.207697, 1.202403, 1.20971, 1.207713, 1.202407, 1.20943, 1.207821, 1.20278, 1.209711, 1.207643, 1.202419, 1.209669, 1.207601, 1.202418, 1.20957, 1.207622, 1.0, 1.202415, 1.20932, 1.20737, 1.202107, 1.209458, 1.20738, 1.202154, 1.209404, 1.207429, 1.202384, 1.209365, 1.207268, 1.201965, 1.209133, 1.207284, 1.202216, 1.209193, 1.207273, 1.202205, 1.209186, 1.207296, 1.201993, 1.209048, 1.207196, 1.202057, 1.209227, 1.207091, 1.201921, 1.20886, 1.207013, 1.20191, 1.208941, 1.206976, 1.201806, 1.208901, 1.206974, 1.201898, 1.208706, 1.206817, 1.201743, 1.20886, 1.206884, 1.20168, 1.208845, 1.207021, 1.201817, 1.209003, 1.206973, 1.201897, 1.209117, 1.0, 1.20711, 1.201789, 1.208999, 1.207025, 1.201954, 1.20909, 1.207079, 1.202082, 1.209242, 1.207273, 1.202144, 1.209183, 1.207182, 1.202068, 1.209241, 1.207337, 1.202113, 1.209117, 1.207284, 1.202184, 1.209311, 1.207442, 1.202196, 1.209481, 1.207603, 1.202447, 1.209505, 1.20758, 1.202484, 1.209575, 1.207649, 1.202313, 1.209661, 1.207741, 1.202613, 1.209603, 1.207752, 1.202546, 1.209701, 1.207775, 1.202605, 1.209725, 1.207767, 1.20266, 1.209676, 1.2077, 1.202577, 1.209534, 1.207626, 1.202468, 1.0, 1.209494, 1.207485, 1.202335, 1.209323, 1.207414, 1.202311, 1.20931, 1.207377, 1.202334, 1.209301, 1.207242, 1.202111, 1.209193, 1.207245, 1.202118, 1.209162, 1.207193, 1.202147, 1.209266, 1.207196, 1.201946, 1.20918, 1.20719, 1.202091, 1.209363, 1.207201, 1.202005, 1.209223, 1.20725, 1.202168, 1.209185, 1.207206, 1.201991, 1.20914, 1.207184, 1.201976, 1.208901, 1.207108, 1.201947, 1.209173, 1.207108, 1.201934, 1.209018, 1.207186, 1.201963, 1.2091, 1.2072, 1.201969, 1.209288, 1.207255, 1.0, 1.202219, 1.209247, 1.207349, 1.202172, 1.20931, 1.207415, 1.202112, 1.209288, 1.207339, 1.202178, 1.20939, 1.20741, 1.202381, 1.209497, 1.207565, 1.202677, 1.20946, 1.20757, 1.202434, 1.209763, 1.207651, 1.202467, 1.209539, 1.207622, 1.202453, 1.20966, 1.207679, 1.202533, 1.209583, 1.207697, 1.202396, 1.209663, 1.207671, 1.202585, 1.209689, 1.207741, 1.202593, 1.209702, 1.207761, 1.202639, 1.209798, 1.207756, 1.202598, 1.20954, 1.207728, 1.202687, 1.209571, 1.20747, 1.202374, 1.209493, 1.0, 1.207526, 1.20234, 1.209364, 1.207387, 1.202259, 1.209516, 1.207439, 1.20216, 1.20926, 1.207348, 1.202288, 1.209257, 1.207229, 1.202015, 1.209345, 1.207287, 1.202206, 1.209148, 1.207215, 1.202185, 1.209234, 1.20721, 1.20212, 1.209172, 1.20724, 1.202012, 1.209085, 1.207169, 1.201933, 1.209194, 1.20717, 1.201864, 1.209025, 1.207195, 1.20195, 1.208829, 1.206909, 1.201831, 1.208749, 1.207027, 1.201816, 1.208805, 1.20693, 1.201745, 1.20905, 1.20695, 1.201729, 1.209042, 1.207123, 1.201915, 1.0, 1.209128, 1.207027, 1.201904, 1.209042, 1.207181, 1.202072, 1.209135, 1.207196, 1.202034, 1.209158, 1.207171, 1.201993, 1.209231, 1.207294, 1.202213, 1.209326, 1.20738, 1.202338, 1.209323, 1.207408, 1.202379, 1.209397, 1.207371, 1.20231, 1.209469, 1.207478, 1.202289, 1.209375, 1.207452, 1.202333, 1.209699, 1.207591, 1.202341, 1.209701, 1.207778, 1.202549, 1.209661, 1.20773, 1.202649, 1.209783, 1.207745, 1.202559, 1.209448, 1.207662, 1.202559, 1.209515, 1.207578, 1.202425, 1.209474, 1.207551, 1.0, 1.202418, 1.209304, 1.207339, 1.202367, 1.209378, 1.207395, 1.20238, 1.209331, 1.207424, 1.202338, 1.209332, 1.20729, 1.202132, 1.209305, 1.207427, 1.202242, 1.209308, 1.207334, 1.20217, 1.209266, 1.207188, 1.202018, 1.208934, 1.207324, 1.202235, 1.20922, 1.207261, 1.202036, 1.20904, 1.207204, 1.202061, 1.209153, 1.207176, 1.202012, 1.208979, 1.206979, 1.20187, 1.208946, 1.207045, 1.201975, 1.20909, 1.207125, 1.201962, 1.209074, 1.207128, 1.202069, 1.209015, 1.207179, 1.202073, 1.209352, 1.0, 1.20724, 1.202168, 1.209264, 1.207365, 1.202334, 1.209171, 1.207522, 1.202523, 1.209602, 1.207504, 1.202316, 1.209483, 1.207492, 1.202275, 1.209538, 1.207629, 1.20249, 1.209705, 1.207633, 1.202464, 1.209579, 1.207588, 1.202533, 1.209596, 1.207644, 1.202441, 1.209534, 1.20753, 1.2025, 1.209633, 1.207566, 1.202533, 1.209584, 1.207718, 1.202584, 1.209571, 1.20767, 1.202551, 1.209712, 1.207709, 1.202536, 1.209453, 1.207697, 1.202679, 1.209542, 1.20755, 1.202525, 1.209623, 1.207642, 1.202655, 1.0, 1.209552, 1.207542, 1.202357, 1.209267, 1.20751, 1.202263, 1.209347, 1.207396, 1.202304, 1.209286, 1.20734, 1.20214, 1.209185, 1.207285, 1.20221, 1.20926, 1.207311, 1.202224, 1.209212, 1.207216, 1.20198, 1.209175, 1.207196, 1.202118, 1.209208, 1.207157, 1.20198, 1.209005, 1.207158, 1.202084, 1.208989, 1.20713, 1.201819, 1.209158, 1.207124, 1.202, 1.208851, 1.206977, 1.201823, 1.209161, 1.207094, 1.201845, 1.209092, 1.207212, 1.202114, 1.209028, 1.207021, 1.201868, 1.209205, 1.207193, 1.0, 1.20203, 1.208881, 1.20721, 1.202174, 1.209095, 1.207144, 1.201895, 1.209196, 1.207383, 1.202355, 1.209224, 1.207314, 1.202145, 1.209454, 1.207314, 1.202073, 1.209221, 1.207408, 1.20232, 1.209306, 1.207278, 1.20219, 1.209364, 1.207461, 1.202508, 1.209319, 1.207406, 1.202409, 1.209424, 1.207353, 1.202142, 1.209313, 1.207506, 1.202537, 1.209473, 1.20751, 1.202362, 1.209427, 1.207578, 1.20245, 1.209567, 1.207668, 1.20252, 1.209362, 1.207622, 1.202458, 1.209438, 1.207473, 1.202414, 1.209601, 1.0, 1.207579, 1.202376, 1.209342, 1.207427, 1.202296, 1.209332, 1.207352, 1.202364, 1.209471, 1.207399, 1.202208, 1.209234, 1.20729, 1.202141, 1.209223, 1.207317, 1.202096, 1.209243, 1.207311, 1.202093, 1.209102, 1.207167, 1.202203, 1.209259, 1.207231, 1.202208, 1.209018, 1.207232, 1.202185, 1.208937, 1.207011, 1.201918, 1.208959, 1.207156, 1.202012, 1.208923, 1.206985, 1.201807, 1.209003, 1.207058, 1.201874, 1.20908, 1.207229, 1.202212, 1.209173, 1.207209, 1.202087, 1.209285, 1.207305, 1.202185, 1.0, 1.209416, 1.207406, 1.202291, 1.209323, 1.207416, 1.202283, 1.209555, 1.207473, 1.202237, 1.209469, 1.207529, 1.202279, 1.209467, 1.207576, 1.202365, 1.209527, 1.207625, 1.202595, 1.209624, 1.207585, 1.202352, 1.209399, 1.207516, 1.202413, 1.209499, 1.207659, 1.202394, 1.209291, 1.207631, 1.202495, 1.209598, 1.207532, 1.20233, 1.209866, 1.207739, 1.20243, 1.209561, 1.207731, 1.20257, 1.209647, 1.207693, 1.202554, 1.209682, 1.207798, 1.202555, 1.209521, 1.207564, 1.202456, 1.209601, 1.207591, 1.0, 1.202462, 1.209428, 1.207514, 1.202413, 1.209452, 1.20737, 1.202129, 1.20929, 1.207455, 1.202285, 1.209211, 1.207261, 1.202211, 1.209134, 1.207225, 1.202204, 1.209257, 1.207241, 1.202218, 1.209215, 1.207206, 1.201977, 1.20912, 1.207098, 1.20202, 1.209229, 1.207252, 1.202022, 1.209086, 1.207156, 1.201852, 1.209077, 1.207142, 1.202042, 1.209205, 1.207098, 1.201788, 1.208932, 1.207123, 1.201994, 1.208975, 1.207171, 1.202032, 1.209344, 1.207291, 1.202034, 1.209014, 1.207274, 1.20221, 1.209332, 1.0, 1.207329, 1.201956, 1.209269, 1.207353, 1.202292, 1.209186, 1.20724, 1.202157, 1.209396, 1.207368, 1.202168, 1.209185, 1.20737, 1.202189, 1.209211, 1.207214, 1.202078, 1.209494, 1.207483, 1.202315, 1.209283, 1.207379, 1.202371, 1.209413, 1.207398, 1.202101, 1.209415, 1.207442, 1.202279, 1.209298, 1.207388, 1.202255, 1.209564, 1.207574, 1.202312, 1.209423, 1.207592, 1.202514, 1.209425, 1.207431, 1.20216, 1.209433, 1.20751, 1.202334, 1.209354, 1.207362, 1.20217, 1.20924, 1.207339, 1.202158, 1.0, 1.209319, 1.207353, 1.20209, 1.209411, 1.207441, 1.20226, 1.209313, 1.207265, 1.202134, 1.209274, 1.207358, 1.20218, 1.209142, 1.20724, 1.202028, 1.209223, 1.207274, 1.202341, 1.209159, 1.20726, 1.202073, 1.209123, 1.207156, 1.202162, 1.209006, 1.207201, 1.202178, 1.209319, 1.207185, 1.201826, 1.209038, 1.207105, 1.201972, 1.208875, 1.206952, 1.20181, 1.208954, 1.207001, 1.201805, 1.208796, 1.207013, 1.201855, 1.209328, 1.207243, 1.202065, 1.209127, 1.2072, 1.201987, 1.209142, 1.207223, 1.0, 1.202181, 1.20934, 1.207415, 1.20222, 1.20943, 1.207445, 1.202365, 1.209507, 1.207565, 1.202413, 1.209657, 1.20756, 1.2025, 1.209602, 1.207548, 1.202303, 1.209484, 1.207655, 1.202486, 1.209518, 1.207559, 1.202362, 1.209543, 1.207573, 1.202434, 1.209538, 1.207632, 1.202623, 1.20962, 1.207622, 1.202407, 1.209618, 1.207663, 1.202656, 1.209635, 1.207738, 1.202636, 1.209718, 1.207729, 1.202552, 1.209549, 1.207707, 1.202616, 1.209585, 1.207642, 1.202484, 1.20952, 1.207591, 1.202501, 1.20953, 1.0, 1.20752, 1.202406, 1.209393, 1.207505, 1.202306, 1.209307, 1.207494, 1.2023, 1.209289, 1.207348, 1.202289, 1.209061, 1.207332, 1.202185, 1.209049, 1.207219, 1.202012]]
# metric = [[float(x) for x in metric]]
def find_all_index(arr, item):
    return [i for i,a in enumerate(arr) if a==item]

metric = []
# # # metric = [1.202235,1.209413,2,3,2,1.207336,1.202167,1.209401,1.207302,1.202002,1.209303,1.207383,1.202241,1.209199,1.207272,1.202047,1.209266,1.207240,1.202062,1.209068,1.207249,1.201935,1.209165,1.207174,1.201900,1.209050,1.207132,1.202171,1.208919,1.206962,1.201606,1.209017,1.207131,1.201844,1.209089,1.207079,1.201907,1.209283,1.207279,1.201989,1.209005,1.207150,1.201943,1.209149,1.207176,1.202081,1.209272,1.207261,1.202062,1.209200,1.207283,1.202089,1.209313,1.207365,1.202239,1.209287,1.207327,1.202120,1.209319,1.207340,1.202214,1.209253,1.207435,1.202095,1.209234,1.207350,1.202143,1.209325,1.207343,1.202155,1.209284,1.207427,1.202243,1.209314,1.207411,1.202152,1.209604,1.207465,1.202094,1.209520,1.207544,1.202360,1.209524,1.207438,1.202206,1.209416,1.207551,1.202370,1.209432,1.207592,1.202425,1.209560,1.207491,1.202203,1.209364,1.207456,1.202137,1.209381,1.207411,1.202337,1.209273,1.207386,1.202202,1.209219,1.207311,1.202157,1.209320,1.207335,1.201996,1.209131,1.207249,1.201940,1.209314,1.207290,1.202186,1.209184,1.207277,1.202043,1.209110,1.207172,1.201894,1.209275,1.207203,1.202052,1.209127,1.207165,1.202046,1.209069,1.207070,1.201899,1.208937,1.207206,1.201925,1.208884,1.207049,1.201835,1.209180,1.207167,1.201915,1.209119,1.207321,1.202137,1.209267,1.207245,1.202019,1.209220,1.207440,1.202303,1.209390,1.207446,1.202191,1.209537,1.207489,1.202228,1.209648,1.207631,1.202468,1.209581,1.207635,1.202452,1.209565,1.207583,1.202493,1.209671,1.207728,1.202639,1.209657,1.207643,1.202304,1.209566,1.207566,1.202421,1.209637,1.207684,1.202455,1.209598,1.207663,1.202468,1.209725,1.207744,1.202399,1.209804,1.207746,1.202403,1.209539,1.207582,1.202628,1.209599,1.207588,1.202261,1.209431,1.207591,1.202386,1.209351,1.207445,1.202096,1.209406,1.207579,1.202286,1.209465,1.207471,1.202245,1.209307,1.207363,1.202201,1.209368,1.207443,1.202391,1.209209,1.207273,1.202095,1.209246,1.207213,1.202072,1.209193,1.207296,1.202126,1.209130,1.207113,1.202068,1.209085,1.207142,1.201806,1.209075,1.207166,1.202017,1.208903,1.206985,1.201762,1.209009,1.207141,1.201817,1.209003,1.207131,1.201943,1.209106,1.207122,1.201795,1.209246,1.207324,1.202187,1.209323,1.207340,1.202100,1.209174,1.207318,1.202118,1.209300,1.207423,1.202176,1.209561,1.207432,1.202171,1.209344,1.207423,1.202209,1.209594,1.207423,1.202177,1.209319,1.207370,1.202328,1.209304,1.207357,1.202224,1.201964,1.209167,1.207216,1.201963,1.209090,1.207085,1.201876,1.209115,1.207181,1.202050,1.209062,1.207169,1.202053,1.208779,1.207038,1.201853,1.209111,1.207173,1.201815,1.209075,1.207154,1.202080,1.208977,1.207114,1.201784,1.209379,1.207346,1.201935,1.209152,1.207319,1.202234,1.209367,1.207360,1.202111,1.209425,1.207577,1.202417,1.209418,1.207513,1.202343,1.209624,1.207609,1.202282,1.209643,1.207737,1.202558,1.209606,1.207597,1.202474,1.209549,1.207682,1.202632,1.209502,1.207697,1.202540,1.209375,1.207581,1.202368,1.209620,1.207642,1.202477,1.209702,1.207684,1.202450,1.209553,1.207619,1.202426,1.209645,1.207710,1.202487,1.209687,1.207605,1.202255,1.209374,1.207468,1.202282,1.209549,1.207511,1.202344,1.209372,1.207484,1.202317,1.209468,1.207470,1.202713,1.209539,1.207448,1.202208,1.209234,1.207332,1.202180,1.209398,1.207326,1.201969,1.209111,1.207396,1.202360,1.209207,1.207114,1.201813,1.209261,1.207227,1.202067,1.209054,1.207131,1.201956,1.209121,1.207072,1.201841,1.208856,1.207203,1.202009,1.209079,1.207042,1.201717,1.209067,1.207064,1.201723,1.209150,1.207225,1.201964,1.209177,1.207165,1.201808,1.209082,1.207274,1.202139,1.209308,1.207349,1.202095,1.209383,1.207380,1.202204,1.209465,1.207491,1.202313,1.209587,1.207537,1.202312,1.209480,1.207494,1.202388,1.209523,1.207635,1.202533,1.209411,1.207548,1.202264,1.209252,1.207371,1.202089,1.209327,1.207443,1.202151,1.209371,1.207426,1.202198,1.209400,1.207430,1.202158,1.209583,1.207589,1.202149,1.209450,1.207513,1.202333,1.209427,1.207451,1.202140,1.209459,1.207475,1.202289,1.209395,1.207307,1.202217,1.209396,1.207306,1.201979,1.209173,1.207318,1.202049,1.209163,1.207157,1.201971,1.209103,1.207249,1.202055,1.209000,1.207143,1.201792,1.209133,1.207153,1.201928,1.209131,1.207172,1.202062,1.209207,1.207198,1.201943,1.209158,1.207188,1.201903,1.209137,1.207257,1.202074,1.209129,1.207169,1.201847,1.209028,1.207137,1.201943,1.209061,1.207103,1.202002,1.208996,1.207094,1.201881,1.208979,1.207066,1.202005,1.209159,1.207144,1.201878,1.209180,1.207283,1.202034,1.209342,1.207336,1.202164,1.209469,1.207425,1.202155,1.209421,1.207507,1.202390,1.209548,1.207537,1.202310,1.209579,1.207626,1.202537,1.209483,1.207565,1.202287,1.209720,1.207663,1.202450,1.209467,1.207581,1.202527,1.209562,1.207538,1.202283,1.209523,1.207610,1.202474,1.209594,1.207624,1.202329,1.209666,1.207656,1.202460,1.209647,1.207785,1.202559,1.209688,1.207693,1.202395,1.209559,1.207641,1.202497,1.209487,1.207621,1.202480,1.209520,1.207658,1.202247,1.209456,1.207498,1.202347,1.209523,1.207438,1.202198,1.209335,1.207418,1.202369,1.209401,1.207351,1.202018,1.209362,1.207314,1.201944,1.209136,1.207307,1.202195,1.209270,1.207166,1.201788,1.209193,1.207197,1.201985,1.209116,1.207138,1.201876,1.209239,1.207258,1.201935,1.209044,1.207128,1.202082,1.208895,1.207048,1.201891,1.208917,1.207119,1.201974,1.209131,1.207151,1.201857,1.209195,1.207207,1.201966,1.209227,1.207256,1.201937,1.209273,1.207309,1.202194,1.209354,1.207499,1.202269,1.209391,1.207457,1.202364,1.209626,1.207536,1.202321,1.209433,1.207532,1.202265,1.209610,1.207549,1.202387,1.209528,1.207612,1.202538,1.209527,1.207574,1.202344,1.209554,1.207554,1.202572,1.209536,1.207645,1.202488,1.209546,1.207511,1.202089,1.209480,1.207508,1.202305,1.209525,1.207580,1.202442,1.209500,1.207539,1.202259,1.209521,1.207594,1.202353,1.209477,1.207474,1.202381,1.209343,1.207464,1.202383,1.209248,1.207280,1.202101,1.209248,1.207212,1.202043,1.209077,1.207158,1.202003,1.208960,1.207113,1.201865,1.208980,1.207080,1.201926,1.208956,1.206972,1.201838,1.209048,1.206992,1.201658,1.208937,1.206988,1.201916,1.209083,1.207085,1.201869,1.209073,1.207192,1.202074,1.209037,1.207135,1.201862,1.209188,1.207113,1.201640,1.208968,1.207020,1.201827,1.209017,1.207016,1.201904,1.209154,1.207185,1.201972,1.209148,1.207209,1.202043,1.209301,1.207301,1.202009,1.209276,1.207374,1.202201,1.209410,1.207371,1.202086,1.209332,1.207497,1.202452,1.209438,1.207465,1.202117,1.209530,1.207542,1.202330,1.209463,1.207612,1.202505,1.209598,1.207603,1.202386,1.209545,1.207682,1.202471,1.209569,1.207683,1.202474,1.209593,1.207533,1.202376,1.209611,1.207682,1.202404,1.209784,1.207749,1.202465,1.209645,1.207834,1.202596,1.209677,1.207727,1.202402,1.209683,1.207662,1.202434,1.209553,1.207567,1.202263,1.209632,1.207597,1.202240,1.209309,1.207491,1.202351,1.209355,1.207370,1.202246,1.209443,1.207361,1.202117,1.209185,1.207264,1.202216,1.209254,1.207222,1.202031,1.209230,1.207281,1.202056,1.209120,1.207125,1.202021,1.209211,1.207156,1.201784,1.209162,1.207240,1.201963,1.209023,1.207094,1.201892,1.209057,1.207167,1.201953,1.209055,1.207114,1.201820,1.209096,1.207075,1.201915,1.209215,1.207222,1.202025,1.209149,1.207272,1.202057,1.209182,1.207356,1.202137,1.209254,1.207433,1.202140,1.209366,1.207391,1.202095,1.209434,1.207424,1.202117,1.209507,1.207581,1.202384,1.209431,1.207489,1.202247,1.209477,1.207584,1.202361,1.209579,1.207623,1.202433,1.209521,1.207591,1.202512,1.209567,1.207665,1.202404,1.209567,1.207654,1.202377,1.209543,1.207573,1.202327,1.209798,1.207739,1.202345,1.209702,1.207821,1.202564,1.209559,1.207590,1.202513,1.209607,1.207609,1.202321,1.209293,1.207387,1.202157,1.209311,1.207264,1.201950,1.209289,1.207339,1.202258,1.209089,1.207168,1.202038,1.209111,1.207104,1.202016,1.209017,1.207057,1.201814,1.208930,1.206959,1.201760,1.208977,1.207083,1.201783,1.209068,1.207039,1.201928,1.208916,1.206973,1.201751,1.208964,1.206999,1.201646,1.208994,1.207060,1.201859,1.209002,1.207010,1.201910,1.209024,1.207073,1.201871,1.209070,1.207037,1.201825,1.209020,1.207086,1.202341,1.209260,1.207247,1.202071,1.209000,1.207156,1.202059,1.209183,1.207216,1.202015,1.209558,1.207471,1.202133,1.209310,1.207322,1.202103,1.209507,1.207520,1.202242,1.209480,1.207645,1.202532,1.209311,1.207403,1.202286,1.209637,1.207681,1.202260,1.209639,1.207647,1.202512,1.209502,1.207495,1.202332,1.209633,1.207716,1.202466,1.209609,1.207648,1.202508,1.209658,1.207724,1.202543,1.209856,1.207875,1.202585,1.209628,1.207729,1.202675,1.209472,1.207655,1.202434,1.209581,1.207694,1.202421,1.209421,1.207513,1.202339,1.209323,1.207545,1.202241,1.209660,1.207561,1.202286,1.209055,1.207361,1.202183,1.209360,1.207351,1.202215,1.209398,1.207343,1.202052,1.209086,1.207269,1.202036,1.209282,1.207263,1.201985,1.209149,1.207230,1.201981,1.208937,1.207073,1.201914,1.209229,1.207220,1.201894,1.208996,1.207132,1.201872,1.208994,1.207033,1.201851,1.208917,1.207287,1.202178]
for r in record:
    data = r.data
    data = data.split(",")
    index = find_all_index(data, "")
    
    for i in index:
        data[i] = 1.0
    data = [float(x) for x in data]

    for i in index:
        data[i] = (data[i-1] +data[i-2])/2
    
    if data:
        metric.append(data)

# print "data", metric
# print "metric", metric  
# start = [1, 0.18, 0.63, 0.29]

start = range(1000)
fig = plt.figure()
window = fig.add_subplot(111)
line, = window.plot(start)
plt.ylim(0, 1.25)
#如果是参数是list,则默认每次取list中的一个元素,即total_datas[0],total_datas[1],...
def update(data):
    # print "data", data
    line.set_ydata(data)
    return line,

ani = animation.FuncAnimation(fig, update, metric, interval=1000)
plt.show()
